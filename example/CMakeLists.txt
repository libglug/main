include(${PROJECT_SOURCE_DIR}/cmake/macros/add_example.cmake)

if (${GLUG_OS_WIN32})
    set(USE_WINMAIN USE_WINMAIN)
endif()

if ("${CMAKE_C_COMPILER_ID}" STREQUAL "GNU" OR "${CMAKE_CXX_COMPILER_ID}" STREQUAL "GNU")
    set(USE_WHOLE_ARCHIVE USE_WHOLE_ARCHIVE)
endif()

set(GLUG_TARGET_NAME ${CMAKE_PROJECT_NAME}_test)

add_example(
    ${USE_WINMAIN} ${USE_WHOLE_ARCHIVE}
    TARGET_NAME ${GLUG_TARGET_NAME}
)

install(
    TARGETS ${GLUG_TARGET_NAME}
    DESTINATION ${GLUG_DIST_XMPL_DIR}
)
